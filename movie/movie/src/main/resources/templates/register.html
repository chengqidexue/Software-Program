<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<title>花瓣--登录界面</title>
	<meta charset="utf-8"> 
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
	<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>

<body background="jpg/fire3.jpg" style=" 
	background-repeat:no-repeat ;
	background-size:100% 100%;
	background-attachment: fixed;">
	<nav class="navbar navbar-expand-sm bg-light">
		<form class="form-inline">	
			<span class="input-group-addon">
				<div class="input-group display-1">	
					<h1 class="navbar-brand" href="#">
		        		<img src="jpg/N.jpg" alt="LOGO" style="width: 40px;">花瓣~
					</h1>
				</div>
			</span>
		</form>
		<div class="collapse navbar-collapse justify-content-end" id="Support" >
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" href="#">相关信息</a></li>
				<li class="nav-item"><a class="nav-link" href="#">联系我们</a></li>
			</ul>
		</div>	
	</nav>
	<div class="container">
		<div class="row">
        	<div class="col-md-3"></br></div>
        </div>
        <div class="row">
        	<div class="col-md-3"></br></div>
        </div>
        <div class="row">
        	<div class="col-md-3"></br></div>
        </div>
        <div class="row">
        	<div class="col-md-3"></br></div>
    	</div>
		<div class="row">
			<div class="col-md-4 offset-md-4" >
				<div id="loging" style="position: relative;top: 0;left: 0;width:100%;height:350px;">
					<div style="height: 100%;width: 100%;background: #030e11;opacity: 0.3;filter: opacity(30);position: absolute;top: 0;left: 0"></div>
					<div style="position: absolute;top: 10%;width: 100%"><h4 class="text-center" style="color: #F4F4F4">登录</h4> </div>
					<div style="position: absolute;height: 70%;width: 100%;top: 30%;left: 0">
						<form th:action="@{/login}" method="post">
							<div class="form-group" style="position: absolute;left: 5%;top: 0;width: 100%;" >
								<label for="name" style="color: azure;position: absolute;left: 0;top: 0">用户名：</label>
                                <input type="text" id="name" name="name" class="form-control" style="position: absolute;left: 20%;top: 0;width: 70%"  />
							</div>
							<div style="position: absolute;left: 5%;top: 30%;width: 100%;" >
								<label for="password" style="color: azure;position: absolute;left: 0;top: 0">密码：</label>
                                <input type="password"  id="password" name="password" class="form-control" style="position: absolute;left: 20%;top: 0;width: 70%"  />
							</div>
							<div style="position: absolute;left: 30%;top: 50%;width: 100%;" >
								<input id="register"  class="btn btn-primary" style="width: 30%" value="注册">
							</div>
							<div style="position: absolute;left: 65%;top: 50%;width: 100%;" >
								<button id="login" class="btn btn-primary" style="width: 30%">登录</button>
							</div>
							<div style="position: absolute;left: 45%;top: 70%;width: 100%;" >
								<a href="#">忘记密码</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/index">游客身份登入</a>
							</div>
						</form>
					</div>
				</div>
				<div class="alert alert-danger" role="alert" th:text="${msg}" th:if="${not #strings.isEmpty(msg)}"></div>
			</div>
		</div>
	</div>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
	$("#register").click(function () {
		$.ajax({
			type: "POST",
			dataType: "text",
			url: "/register",
			data: {
				"name": $("#name").val(),
				"password": $("#password").val()
			},
			success: function (result) {
				// 只有请求成功（状态码为200）才会执行这个函数
				//$("#ret").text(result);
				alert(result);
				//刷新页面
				//window.location.reload();

			},
			error: function (result) {
				// 只有请求不正常（状态码不为200）才会执行
				//$("#ret").text(result.responseText);
				alert("注册失败" + result.responseText);

			}
		});
	});


	$("#login").click(function () {
		$.ajax({
			type: "POST",
			dataType: "text",
			url: "/login",
			data: {
				"name": $("#name").val(),
				"password": $("#password").val()
			},
			success: function (result) {
				// 只有请求成功（状态码为200）才会执行这个函数
				//$("#ret").text(result);
				//alert(result);
				//刷新页面
				//window.location.reload();

			},
			error: function (result) {
				// 只有请求不正常（状态码不为200）才会执行
				//$("#ret").text(result.responseText);
				//alert("登陆失败" + result.responseText);

			}
		});
	});
</script>
</body>
</html>
